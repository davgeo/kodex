{% extends "main/kodi_server_base.html" %}

{% load staticfiles %}

{% block center %}
  <h2>
    <a href="{% url 'tvshow' server.id tvshow.tvshowid %}">{{ tvshow.title }}</a>
    <small><a href="{% url 'tvseason' server.id tvshow.tvshowid season %}">Season {{ season }}</a></small>

    {% if selection %}
      <small>Episode {{ selection.episode }}</small>
    {% endif %}
  </h2>

  {% if episodeid %}
    <h3>{{ selection.title }}</h3>
    <p>{{ selection.plot }}</p>
    <div id="file" class="collapse"><p>File: {{ selection.file }}</p></div>
    <a href="{% url 'playtv' server.id showid season episodeid %}" class="btn btn-primary" role="button">
      <span class="glyphicon glyphicon-play"></span> Play
    </a>
    <a href="{% url 'addtv' server.id showid season episodeid %}" class="btn btn-info" role="button">
      <span class="glyphicon glyphicon-plus"></span> Add
    </a>
    <span class="dropdown pull-right">
      <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Misc <span class="caret"></span></button>
      <ul class="dropdown-menu">
        <li><a data-toggle="collapse" data-target="#file">Show File Path</a></li>
        <li><a href="#">Remove Episode</a></li>
        <li><a href="#">...</a></li>
      </ul>
    </span>
  {% endif %}

  <hr>

  {% for episode in episodes %}
    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 episode_wrapper">
      <a href="{% url 'tvepisode' server.id episode.tvshowid episode.season episode.episodeid %}">
        <img src="{% static 'cache' %}/{{ episode.thumbnail }}" class="img-responsive episode_thumb">
        <a href="{{request.get_full_path}}_watched">
          {% if episode.playcount %}
            <i class="fa fa-check-square-o pull-right"></i>
          {% else %}
            <i class="fa fa-square-o pull-right"></i>
          {% endif %}
        </a>
        <a href="{% url 'addtv' server.id episode.tvshowid episode.season episode.episodeid %}"><i class="fa fa-plus-circle pull-right"></i></span></a>
        <a href="{% url 'playtv' server.id episode.tvshowid episode.season episode.episodeid %}"><i class="fa fa-play-circle-o pull-right"></i></a>
        <a href="{% url 'tvepisode' server.id episode.tvshowid episode.season episode.episodeid %}"><p>{{ episode.episode }}. {{ episode.title }}</p></a>
      </a>
    </div>
  {% endfor %}
{% endblock %}
